"use strict";(self.webpackChunkfrontdesign=self.webpackChunkfrontdesign||[]).push([[768],{7768:(A,g,l)=>{l.r(g),l.d(g,{StaffModule:()=>N});var c=l(6895),u=l(6773),i=l(433),t=l(8256),h=l(4383),_=l(2340),b=l(529);let p=(()=>{class o{constructor(e){this.http=e,this.serverURL=_.N.serverURL}getDeptDetails(){return this.http.get(`${this.serverURL}/staff/getDeptDetails`,{withCredentials:!0})}submitDoc(e){return this.http.post(`${this.serverURL}/staff/submitDoc`,e,{withCredentials:!0})}submitDocmentdetails(e){return this.http.post(`${this.serverURL}/staff/submitDocmentdetails`,e,{withCredentials:!0})}getDocumentDetails(){return this.http.get(`${this.serverURL}/staff/getDocumentDetails`,{withCredentials:!0})}requestData(e){return this.http.post(`${this.serverURL}/staff/requestData`,e,{withCredentials:!0})}submitReuploadDocmentdetails(e){return this.http.post(`${this.serverURL}/staff/submitReuploadDocmentdetails`,e,{withCredentials:!0})}submitReuploadDocment(e){return this.http.post(`${this.serverURL}/staff/submitReuploadDocment`,e,{withCredentials:!0})}getDeptidDetails(){return this.http.get(`${this.serverURL}/staff/getDeptidDetails`,{withCredentials:!0})}getdeptidData(){return this.http.get(`${this.serverURL}/staff/getdeptidData`,{withCredentials:!0})}getredeptidData(){return this.http.get(`${this.serverURL}/staff/getredeptidData`,{withCredentials:!0})}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(b.eN))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();function D(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td")(6,"input",8),t.NdJ("change",function(r){const d=t.CHM(e).$implicit,m=t.oxw();return t.KtG(m.onFileSelected(r,d.docNameId))}),t.qZA()(),t.TgZ(7,"td")(8,"textarea",9),t.NdJ("ngModelChange",function(r){const d=t.CHM(e).$implicit;return t.KtG(d.description=r)}),t.qZA()(),t.TgZ(9,"td")(10,"button",10),t.NdJ("click",function(){const s=t.CHM(e).$implicit,d=t.oxw();return t.KtG(d.onSubmit(s.docNameId,d.attachedDocument.value,s.description,s.docName))}),t._uU(11," Submit "),t.qZA()()()}if(2&o){const e=a.$implicit,n=a.index,r=t.oxw();t.ekj("disabled-row",e.isRowDisabled),t.xp6(2),t.Oqu(n+1),t.xp6(2),t.Oqu(e.docName),t.xp6(2),t.Q6J("formControl",r.attachedDocument),t.xp6(2),t.Q6J("ngModel",e.description),t.xp6(2),t.Q6J("disabled","1"===e.docStatus)}}function Z(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td")(6,"a",8),t._UZ(7,"i",9),t._uU(8," Open File "),t.qZA()(),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.TgZ(11,"td")(12,"textarea",10),t.NdJ("ngModelChange",function(r){const d=t.CHM(e).$implicit;return t.KtG(d.replyText=r)}),t.qZA()(),t.TgZ(13,"td")(14,"button",11),t.NdJ("click",function(){const s=t.CHM(e).$implicit,d=t.oxw();return t.KtG(d.sendReply(s.replyText,s.docId))}),t._uU(15,"Request"),t.qZA()()()}if(2&o){const e=a.$implicit,n=a.index;t.xp6(2),t.Oqu(n+1),t.xp6(2),t.hij(" ",e.docName," "),t.xp6(2),t.Q6J("href",e.docPath,t.LSH),t.xp6(4),t.Oqu(e.Remark),t.xp6(2),t.Q6J("ngModel",e.replyText)}}function T(o,a){if(1&o&&(t.TgZ(0,"option",21),t._uU(1),t.qZA()),2&o){const e=a.$implicit;t.Q6J("ngValue",e),t.xp6(1),t.hij("",e.docName," ")}}function x(o,a){if(1&o&&(t.TgZ(0,"span",22)(1,"span",23),t._uU(2),t.qZA()()),2&o){const e=t.oxw();t.xp6(2),t.Oqu(e.bankFileFileGood)}}function q(o,a){if(1&o&&(t.TgZ(0,"option",21),t._uU(1),t.qZA()),2&o){const e=a.$implicit;t.Q6J("ngValue",e),t.xp6(1),t.hij("",e.docName," ")}}function y(o,a){if(1&o&&(t.TgZ(0,"span",22)(1,"span",23),t._uU(2),t.qZA()()),2&o){const e=t.oxw();t.xp6(2),t.Oqu(e.bankFileFileGood)}}const f={role:"Staff"},S=[{path:"",redirectTo:"dashboard",pathMatch:"full"},{path:"docupload",component:(()=>{class o{constructor(e,n,r,s){this.toastr=e,this.fb=n,this.router=r,this.staffService=s,this.documentNameControl=new i.NI("",[i.kI.required,i.kI.minLength(3)]),this.attachedDocument=new i.NI(null),this.isSubmitDisabled=!1,this.description="",this.documentForm=this.fb.group({documentName:this.documentNameControl,attachedDocument:this.attachedDocument})}ngOnInit(){this.loadDetails()}onSubmit(e,n,r,s){null!==n?this.staffService.submitDocmentdetails({docId:e,file:n,description:r,docName:s}).subscribe(m=>{!0===m&&(alert("Data submitted successfully"),this.onReset(),this.loadDetails())},m=>{alert(`Error: ${m.statusText} (Status: ${m.status})`)}):alert("Please select a file to submit.")}onReset(){this.description="",this.documentForm.reset()}loadDetails(){this.staffService.getdeptidData().subscribe(e=>{this.documentDetails=e},e=>this.toastr.error(e.statusText,e.status))}onFileSelected(e,n){const r=e.target.files[0];if(r){if(!["application/pdf","image/jpeg"].includes(r.type))return alert("Only PDF and JPG files are allowed."),void(e.target.value="");if(r.size>2097152)return alert("File size should not exceed 2MB."),void(e.target.value="")}}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(h._W),t.Y36(i.qu),t.Y36(u.F0),t.Y36(p))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-staffdocentry"]],decls:22,vars:1,consts:[[1,"row"],[1,"col-lg-12"],[1,"card"],[1,"card-header"],[1,"card-title","mb-0"],[1,"card-body"],["id","alternative-pagination",1,"table","nowrap","dt-responsive","align-middle","table-hover","table-bordered",2,"width","100%"],[3,"disabled-row",4,"ngFor","ngForOf"],["type","file","id","formFile","accept",".pdf, .jpg, .jpeg",1,"form-control",3,"formControl","change"],["placeholder","Enter Description","id","des-info-description-input","rows","3","required","","name","description",1,"form-control",3,"ngModel","ngModelChange"],[1,"btn","btn-sm","btn-soft-info",3,"disabled","click"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h5",4),t._uU(5,"Documents Details"),t.qZA()(),t.TgZ(6,"div",5)(7,"table",6)(8,"thead")(9,"tr")(10,"th"),t._uU(11,"SR No."),t.qZA(),t.TgZ(12,"th"),t._uU(13,"Document Name"),t.qZA(),t.TgZ(14,"th"),t._uU(15,"Document Upload"),t.qZA(),t.TgZ(16,"th"),t._uU(17,"Description"),t.qZA(),t.TgZ(18,"th"),t._uU(19,"Action"),t.qZA()()(),t.TgZ(20,"tbody"),t.YNc(21,D,12,7,"tr",7),t.qZA()()()()()()),2&e&&(t.xp6(21),t.Q6J("ngForOf",n.documentDetails))},dependencies:[c.sg,i.Fj,i.JJ,i.Q7,i.On,i.oH]}),o})(),data:f},{path:"view",component:(()=>{class o{constructor(e,n,r){this.fb=e,this.router=n,this.staffService=r,this.replyText=""}ngOnInit(){this.loadDetails()}loadDetails(){this.staffService.getDocumentDetails().subscribe(e=>{this.documentDetails=e})}sendReply(e,n){this.staffService.requestData({reply:e,id:n}).subscribe(s=>{"true"===s[0].msg&&alert("Data inserted successfully")},s=>{alert(`Error: ${s.statusText} (Status Code: ${s.status})`)})}photoshow(e){const n=new Image;n.src=e;const r=window.open("");r?r.document.write(n.outerHTML):console.error("Failed to open a new window. Please check pop-up settings.")}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(i.qu),t.Y36(u.F0),t.Y36(p))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-staffview"]],decls:24,vars:1,consts:[[1,"row","justify-content-center"],[1,"col-lg-12"],[1,"card"],[1,"card-header"],[1,"card-title","mb-0"],[1,"card-body"],["id","example",1,"table","table-bordered","dt-responsive","nowrap","table-striped","align-middle",2,"width","100%"],[4,"ngFor","ngForOf"],["target","_blank","rel","noopener noreferrer",3,"href"],["aria-hidden","true",1,"fa","fa-eye",2,"font-size","24px","display","block","margin-bottom","4px"],["placeholder","Write your reply...",3,"ngModel","ngModelChange"],[1,"btn","btn-sm","btn-soft-info",3,"click"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h5",4),t._uU(5,"Documents Details"),t.qZA()(),t.TgZ(6,"div",5)(7,"table",6)(8,"thead")(9,"tr")(10,"th"),t._uU(11,"SR No."),t.qZA(),t.TgZ(12,"th"),t._uU(13,"Document Name"),t.qZA(),t.TgZ(14,"th"),t._uU(15,"Document Details"),t.qZA(),t.TgZ(16,"th"),t._uU(17,"Remarks"),t.qZA(),t.TgZ(18,"th"),t._uU(19,"Request"),t.qZA(),t.TgZ(20,"th"),t._uU(21,"Action"),t.qZA()()(),t.TgZ(22,"tbody"),t.YNc(23,Z,16,5,"tr",7),t.qZA()()()()()()),2&e&&(t.xp6(23),t.Q6J("ngForOf",n.documentDetails))},dependencies:[c.sg,i.Fj,i.JJ,i.On]}),o})(),data:f},{path:"reupload",component:(()=>{class o{constructor(e,n,r,s){this.fb=e,this.router=n,this.staffService=r,this.toastr=s,this.isSubmitDisabled=!1,this.documentForm=this.fb.group({documentName:["",i.kI.required],docId:["",i.kI.required],description:["",i.kI.required],attachedDocument:["",i.kI.required]})}ngOnInit(){this.loadDetails()}get mrf(){return this.documentForm.controls}get documentName(){return this.documentForm.get("documentName")}get docId(){return this.documentForm.get("docId")}get description(){return this.documentForm.get("description")}loadDetails(){this.staffService.getredeptidData().subscribe(e=>{this.documentDetails=e,console.log(this.documentDetails)},e=>this.toastr.error(e.statusText,e.status))}selectedbankFile(e){if(this.documentFileUrl=e.target.files[0],null!=this.documentFileUrl){var n=this.documentFileUrl.size;["image/jpeg","image/png","image/jpg","application/pdf"].includes(this.documentFileUrl.type)?(this.bankFileFileGood="",this.showbankFileError=!0,n>5e6&&(alert("file size too large"),this.documentForm.patchValue({attachedDocument:""}),this.showbankFileError=!0,this.bankFileFileGood="File size too large")):(this.bankFileFileGood="Wrong file Type Selected",this.documentForm.patchValue({attachedDocument:""}),this.showbankFileError=!0)}else window.alert("Upload Mandatory Files")}onSubmit(){const e={documentName:this.documentForm.value.documentName.docName,description:this.documentForm.value.description,docId:this.documentForm.value.documentName.docNameId},n=new FormData;n.append("documentFile",this.documentFileUrl),n.append("value",JSON.stringify(e)),this.staffService.submitReuploadDocment(n).subscribe(r=>{!0===r?(alert("Data submitted successfully"),this.loadDetails()):alert("Unexpected response from the server.")},r=>{alert(`Error: ${r.statusText} (Status: ${r.status})`)})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(i.qu),t.Y36(u.F0),t.Y36(p),t.Y36(h._W))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-reupload-document"]],decls:38,vars:3,consts:[[1,"main-card","mb-3","card"],[1,"card-header"],[1,"header-icon","lnr-license","icon-gradient","bg-plum-plate"],["novalidate","","autocomplete","off","role","form",3,"formGroup"],["documentFormID",""],[1,"card-body"],[1,"card-title"],[1,"row"],[1,"col-md-4","col-sm-6","col-xs-12"],["for","ddlFinancialYear",1,"control-label"],[1,"text-danger"],["id","ddlFinacialYear","formControlName","documentName","name","documentName","id","documentName","required","",1,"form-control"],["value","","disabled",""],[3,"ngValue",4,"ngFor","ngForOf"],["for","ddlFarmerwithImplements",1,"control-label"],["type","file","accept","image/jpeg, image/png,image/jpg, application/pdf","placeholder","","formControlName","attachedDocument","name","attachedDocument","id","attachedDocument","required","",1,"form-control",3,"change"],["for","",2,"font-size","10px","color","red"],["style","color:red;font-size: 15px; margin-left: 40px;",4,"ngIf"],["type","text","placeholder","remark","formControlName","description","name","description","id","description","required","",1,"form-control"],[1,"d-block","text-right","card-footer"],["type","submit",1,"btn","btn-primary",3,"click"],[3,"ngValue"],[2,"color","red","font-size","15px","margin-left","40px"],[2,"color","red"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"div",1),t._UZ(2,"i",2),t._uU(3,"Document Entry "),t.qZA(),t.TgZ(4,"form",3,4)(6,"div",5),t._UZ(7,"h5",6),t.TgZ(8,"div",7)(9,"div",8)(10,"label",9),t._uU(11,"Document Name "),t.TgZ(12,"span",10),t._uU(13,"*"),t.qZA()(),t.TgZ(14,"select",11)(15,"option",12),t._uU(16,"---Select Dept Id---"),t.qZA(),t.YNc(17,T,2,2,"option",13),t.qZA()(),t.TgZ(18,"div",8)(19,"label",14),t._uU(20,"Upload Bank Payment File"),t.TgZ(21,"span",10),t._uU(22,"*"),t.qZA()(),t.TgZ(23,"input",15),t.NdJ("change",function(s){return n.selectedbankFile(s)}),t.qZA(),t.TgZ(24,"label",16),t._uU(25,"\xa0\xa0 **File size should be less than 2MB"),t.qZA(),t._UZ(26,"br"),t.YNc(27,x,3,1,"span",17),t.qZA(),t.TgZ(28,"div",8)(29,"label",9),t._uU(30,"Document Remark "),t.TgZ(31,"span",10),t._uU(32,"*"),t.qZA()(),t._UZ(33,"input",18),t.qZA()(),t._UZ(34,"br"),t.qZA(),t.TgZ(35,"div",19)(36,"button",20),t.NdJ("click",function(){return n.onSubmit()}),t._uU(37,"Submit"),t.qZA()()()()),2&e&&(t.xp6(4),t.Q6J("formGroup",n.documentForm),t.xp6(13),t.Q6J("ngForOf",n.documentDetails),t.xp6(10),t.Q6J("ngIf",n.showbankFileError))},dependencies:[c.sg,c.O5,i._Y,i.YN,i.Kr,i.Fj,i.EJ,i.JJ,i.JL,i.Q7,i.sg,i.u]}),o})(),data:f},{path:"docentry",component:(()=>{class o{constructor(e,n,r,s){this.toastr=e,this.fb=n,this.router=r,this.staffService=s,this.isSubmitDisabled=!1,this.documentForm=this.fb.group({documentName:["",i.kI.required],docId:["",i.kI.required],description:["",i.kI.required],attachedDocument:["",i.kI.required]})}ngOnInit(){this.loadDetails()}get mrf(){return this.documentForm.controls}get documentName(){return this.documentForm.get("documentName")}get docId(){return this.documentForm.get("docId")}get description(){return this.documentForm.get("description")}loadDetails(){this.staffService.getdeptidData().subscribe(e=>{this.documentDetails=e,console.log(this.documentDetails)},e=>this.toastr.error(e.statusText,e.status))}selectedbankFile(e){if(this.documentFileUrl=e.target.files[0],null!=this.documentFileUrl){var n=this.documentFileUrl.size;["image/jpeg","image/png","image/jpg","application/pdf"].includes(this.documentFileUrl.type)?(this.bankFileFileGood="",this.showbankFileError=!0,n>5e6&&(alert("file size too large"),this.documentForm.patchValue({attachedDocument:""}),this.showbankFileError=!0,this.bankFileFileGood="File size too large")):(this.bankFileFileGood="Wrong file Type Selected",this.documentForm.patchValue({attachedDocument:""}),this.showbankFileError=!0)}else window.alert("Upload Mandatory Files")}onSubmit(){const e={documentName:this.documentForm.value.documentName.docName,description:this.documentForm.value.description,docId:this.documentForm.value.documentName.docNameId},n=new FormData;n.append("documentFile",this.documentFileUrl),n.append("value",JSON.stringify(e)),this.staffService.submitDocmentdetails(n).subscribe(r=>{!0===r?(alert("Data submitted successfully"),this.loadDetails()):alert("Unexpected response from the server.")},r=>{alert(`Error: ${r.statusText} (Status: ${r.status})`)})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(h._W),t.Y36(i.qu),t.Y36(u.F0),t.Y36(p))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-documentupload"]],decls:38,vars:3,consts:[[1,"main-card","mb-3","card"],[1,"card-header"],[1,"header-icon","lnr-license","icon-gradient","bg-plum-plate"],["novalidate","","autocomplete","off","role","form",3,"formGroup"],["documentFormID",""],[1,"card-body"],[1,"card-title"],[1,"row"],[1,"col-md-4","col-sm-6","col-xs-12"],["for","ddlFinancialYear",1,"control-label"],[1,"text-danger"],["id","ddlFinacialYear","formControlName","documentName","name","documentName","id","documentName","required","",1,"form-control"],["value","","disabled",""],[3,"ngValue",4,"ngFor","ngForOf"],["for","ddlFarmerwithImplements",1,"control-label"],["type","file","accept","image/jpeg, image/png,image/jpg, application/pdf","placeholder","","formControlName","attachedDocument","name","attachedDocument","id","attachedDocument","required","",1,"form-control",3,"change"],["for","",2,"font-size","10px","color","red"],["style","color:red;font-size: 15px; margin-left: 40px;",4,"ngIf"],["type","text","placeholder","remark","formControlName","description","name","description","id","description","required","",1,"form-control"],[1,"d-block","text-right","card-footer"],["type","submit",1,"btn","btn-primary",3,"click"],[3,"ngValue"],[2,"color","red","font-size","15px","margin-left","40px"],[2,"color","red"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"div",1),t._UZ(2,"i",2),t._uU(3,"Document Entry "),t.qZA(),t.TgZ(4,"form",3,4)(6,"div",5),t._UZ(7,"h5",6),t.TgZ(8,"div",7)(9,"div",8)(10,"label",9),t._uU(11,"Document Name "),t.TgZ(12,"span",10),t._uU(13,"*"),t.qZA()(),t.TgZ(14,"select",11)(15,"option",12),t._uU(16,"---Select Dept Id---"),t.qZA(),t.YNc(17,q,2,2,"option",13),t.qZA()(),t.TgZ(18,"div",8)(19,"label",14),t._uU(20,"Upload Bank Payment File"),t.TgZ(21,"span",10),t._uU(22,"*"),t.qZA()(),t.TgZ(23,"input",15),t.NdJ("change",function(s){return n.selectedbankFile(s)}),t.qZA(),t.TgZ(24,"label",16),t._uU(25,"\xa0\xa0 **File size should be less than 2MB"),t.qZA(),t._UZ(26,"br"),t.YNc(27,y,3,1,"span",17),t.qZA(),t.TgZ(28,"div",8)(29,"label",9),t._uU(30,"Document Remark "),t.TgZ(31,"span",10),t._uU(32,"*"),t.qZA()(),t._UZ(33,"input",18),t.qZA()(),t._UZ(34,"br"),t.qZA(),t.TgZ(35,"div",19)(36,"button",20),t.NdJ("click",function(){return n.onSubmit()}),t._uU(37,"Submit"),t.qZA()()()()),2&e&&(t.xp6(4),t.Q6J("formGroup",n.documentForm),t.xp6(13),t.Q6J("ngForOf",n.documentDetails),t.xp6(10),t.Q6J("ngIf",n.showbankFileError))},dependencies:[c.sg,c.O5,i._Y,i.YN,i.Kr,i.Fj,i.EJ,i.JJ,i.JL,i.Q7,i.sg,i.u]}),o})(),data:f}];let w=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[u.Bz.forChild(S),u.Bz]}),o})(),N=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[c.ez,w,i.u5,i.UX,b.JF]}),o})()}}]);